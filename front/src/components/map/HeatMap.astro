---
const { accessToken, center = [-76.532, 3.4516], zoom = 2.4 } = Astro.props;
---

<link
  href="https://api.mapbox.com/mapbox-gl-js/v3.0.1/mapbox-gl.css"
  rel="stylesheet"
/>

<div id="map"></div>

<script src="https://api.mapbox.com/mapbox-gl-js/v3.0.1/mapbox-gl.js"></script>

<script is:inline define:vars={{ accessToken, center, zoom }}>
  // Wait for Mapbox to load
  if (typeof mapboxgl !== "undefined") {
    initMap();
  } else {
    window.addEventListener("load", initMap);
  }

  function initMap() {
    mapboxgl.accessToken = accessToken;

    const map = new mapboxgl.Map({
      container: "map",
      style: "mapbox://styles/taurien/cmhietzfi004101qicxjz3n70",
      center: center,
      zoom: zoom,
    });

    map.addControl(new mapboxgl.NavigationControl());
  }
</script>

<style>
  #map {
    width: 100%;
    height: 100vh;
  }
</style>
